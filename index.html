<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="A reference page for this extremely specific combination of CSS properties that are required to truncate a paragraph after a specified number of lines.">
  <meta property="og:title" content="CSS for line clamp ellipsis">
  <meta property="og:description" content="A reference page for this extremely specific combination of CSS properties that are required to truncate a paragraph after a specified number of lines.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://cssforlineclampellipsis.com/">
  <link rel="canonical" href="https://cssforlineclampellipsis.com/">
  <link rel="icon" href="data:,">
  <link rel="preload" href="/Inter.woff2" as="font" crossorigin>
  <link rel="preload" href="/Inter_Bold.woff2" as="font" crossorigin>
  <link rel="preload" href="/Source_Code_Pro.woff2" as="font" crossorigin>
  <title>CSS for line clamp ellipsis</title>
  <style>
    @import '/prism.css' layer;

    @font-face {
      font-family: 'Inter';
      font-weight: 400;
      src: local('Inter'), url('/Inter.woff2');
    }

    @font-face {
      font-family: 'Inter';
      font-weight: 700;
      src: local('Inter'), url('/Inter_Bold.woff2');
    }

    @font-face {
      font-family: 'Source Code Pro';
      src: local('Source Code Pro'), url('/Source_Code_Pro.woff2');
    }

    :root {
      font-family: 'Inter', sans-serif;
    }

    body {
      background: hsl(216deg 50% 97%);
      color: hsl(216deg 50% 5%);
    }

    header {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-inline: 8px;
    }

    h1 {
      text-align: center;
      font-size: 1.75rem;
      margin: 0;
    }

    a {
      color: hsl(216deg 70% 35%);
      font-weight: 700;
      padding-block: 2px;
      padding-inline: 4px;
      border-radius: 4px;
      outline-color: hsl(216deg 50% 50%);
      outline-offset: 1px;
      text-decoration: none;
      transition: background-color 500ms, color 800ms;
    }

    a:hover,
    a:focus {
      color: hsl(216deg 70% 30%);
      background: hsl(216deg 50% 90%);
      transition: background-color 200ms, color 200ms;
    }

    main {
      inline-size: min(1080px, 100% - 16px);
      margin-inline: auto;
      margin-block-end: 96px;
    }

    p {
      inline-size: min(800px, 100%);
    }

    p:not(.line-clamp, .dynamic-line-clamp) {
      line-height: 1.5;
    }

    pre {
      display: flex;
      justify-content: space-between;
    }

    button {
      align-self: start;
      min-inline-size: 26px;
      padding: 0;
      background: unset;
      border: unset;
      cursor: pointer;
      outline-color: hsl(216deg 50% 50%);
      outline-offset: 1px;
    }

    svg {
      display: block;
      pointer-events: none;
      opacity: 0.5;
      transition: opacity 400ms, filter 400ms;
    }

    :is(pre:hover, pre:focus-within) svg {
      transition: opacity 200ms, filter 400ms;
      opacity: 0.9;
    }

    :is(button:hover, button:focus-within) svg {
      filter: drop-shadow(0 0 16px hsl(216deg 50% 65%));
      transition: opacity 200ms, filter 200ms;
    }

    pre,
    code {
      border-radius: 4px;
      border: 1px solid hsl(216deg 50% 75%);
      outline-color: hsl(216deg 50% 50%);
      outline-offset: 1px;
      background: hsl(24deg 20% 95%);
      overflow: auto;
    }

    pre>code {
      border: unset;
    }

    code {
      font-family: 'Source Code Pro', monospace;
      padding-block: 2px;
      padding-inline: 4px;
    }

    .line-clamp {
      display: -webkit-box;
      -webkit-box-orient: vertical;
      -webkit-line-clamp: 5;
      overflow: hidden;
    }

    .width-resizable {
      resize: horizontal;
      min-inline-size: 50px;
      max-inline-size: min(1080px, 100%);
    }

    .dynamic-line-clamp {
      display: -webkit-box;
      -webkit-box-orient: vertical;
      -webkit-line-clamp: var(--lines);
      overflow: hidden;

      &::after {
        height: 1lh;
      }
    }

    .height-resizable {
      resize: vertical;
      min-block-size: 21px;
      max-block-size: 262px;
    }

    .height-resizable-container {
      min-block-size: 264px;
    }

    .both-resizable {
      resize: both;
      min-block-size: 21px;
      max-block-size: 262px;
      min-inline-size: 50px;
      max-inline-size: min(1080px, 100%);
    }

    .width-resizable,
    .height-resizable,
    .both-resizable {
      border: 1px dashed hsl(216deg 50% 75%);
      border-radius: 4px;
    }
  </style>
</head>

<body>
  <header>
    <h1>CSS for line clamp&nbsp;ellipsis</h1>
    <a href="https://github.com/ardislu/css-for-line-clamp-ellipsis">GitHub</a>
  </header>

  <main>
    <section>
      <h2>Fixed number of lines</h2>
      <p>Here's the CSS required to make a paragraph truncate with an ellipsis after a specific number of lines
        (the vendor prefixes are required):</p>
      <pre><code class="language-css">.line-clamp {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 5;
  overflow: hidden;
}</code></pre>
      <p>Here is the above CSS in action. Try adjusting the paragraph's width:</p>
      <p class="line-clamp width-resizable">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore
        magna aliqua. Dolor sit amet consectetur adipiscing elit duis tristique sollicitudin. Suscipit adipiscing bibendum
        est ultricies integer quis auctor. Odio facilisis mauris sit amet massa vitae tortor condimentum lacinia. Nam
        libero justo laoreet sit amet cursus sit amet. Nisl vel pretium lectus quam id. Proin nibh nisl condimentum id.
        Sagittis vitae et leo duis ut diam quam nulla. Sed cras ornare arcu dui vivamus arcu felis. Vulputate ut pharetra
        sit amet aliquam id diam. Id neque aliquam vestibulum morbi. Tellus at urna condimentum mattis. Non enim praesent
        elementum facilisis leo vel. Turpis massa tincidunt dui ut. Risus quis varius quam quisque id. Amet purus gravida
        quis blandit. Felis eget velit aliquet sagittis id consectetur purus ut. Quis commodo odio aenean sed adipiscing.
        Pellentesque elit eget gravida cum sociis natoque penatibus et magnis. Facilisis leo vel fringilla est ullamcorper
        eget nulla. Montes nascetur ridiculus mus mauris. Nunc sed augue lacus viverra vitae congue. Morbi non arcu risus
        quis varius quam quisque id. Adipiscing tristique risus nec feugiat in fermentum posuere urna nec. Elit
        ullamcorper dignissim cras tincidunt lobortis feugiat vivamus.
      </p>
    </section>

    <section>
      <h2>Dynamic number of lines</h2>
      <p>You can also use a CSS variable and some JavaScript to dynamically set the <code>-webkit-line-clamp</code>
        property based on the container's height. Using this CSS:
      </p>
      <pre><code class="language-css">.dynamic-line-clamp {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: var(--lines);
  overflow: hidden;
  &::after {
    height: 1lh;
  }
}</code></pre>
      <p>And this JavaScript:</p>
      <pre><code class="language-javascript">const elem = document.querySelector('.dynamic-line-clamp');
const lh = Number(getComputedStyle(elem, '::after').getPropertyValue('height').slice(0, -2));
new ResizeObserver(() => {
  const lines = Math.round(elem.clientHeight / lh);
  elem.style.setProperty('--lines', lines);
}).observe(elem);</code></pre>
      <p>Try adjusting the height:</p>
      <div class="height-resizable-container">
        <p id="basic-observer" class="dynamic-line-clamp height-resizable">
          Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore
          magna aliqua. Dolor sit amet consectetur adipiscing elit duis tristique sollicitudin. Suscipit adipiscing bibendum
          est ultricies integer quis auctor. Odio facilisis mauris sit amet massa vitae tortor condimentum lacinia. Nam
          libero justo laoreet sit amet cursus sit amet. Nisl vel pretium lectus quam id. Proin nibh nisl condimentum id.
          Sagittis vitae et leo duis ut diam quam nulla. Sed cras ornare arcu dui vivamus arcu felis. Vulputate ut pharetra
          sit amet aliquam id diam. Id neque aliquam vestibulum morbi. Tellus at urna condimentum mattis. Non enim praesent
          elementum facilisis leo vel. Turpis massa tincidunt dui ut. Risus quis varius quam quisque id. Amet purus gravida
          quis blandit. Felis eget velit aliquet sagittis id consectetur purus ut. Quis commodo odio aenean sed adipiscing.
          Pellentesque elit eget gravida cum sociis natoque penatibus et magnis. Facilisis leo vel fringilla est ullamcorper
          eget nulla. Montes nascetur ridiculus mus mauris. Nunc sed augue lacus viverra vitae congue. Morbi non arcu risus
          quis varius quam quisque id. Adipiscing tristique risus nec feugiat in fermentum posuere urna nec. Elit
          ullamcorper dignissim cras tincidunt lobortis feugiat vivamus.
        </p>
      </div>
      <p>Note that <code>overflow: hidden</code> <strong>will only hide text that is outside</strong> the
        container element. So if you resize the paragraph to cut through the middle of a line, the ellipsis will appear on
        the line above it but the cut-off text will still be visible.
      </p>
    </section>

    <section>
      <h2>Dynamic number of lines: quality of life improvements</h2>
      <p>
        If your paragraph's height is dynamic, it's useful to add some JavaScript to snap the paragraph's height to a multiple of
        its <code>line-height</code> whenever the paragraph is resized. To do so, update <code>ResizeObserver</code>:
      </p>
      <pre><code class="language-javascript">new ResizeObserver(() => {
  const lines = Math.round(elem.clientHeight / lh);
  elem.style.setProperty('--lines', lines);
  elem.style.setProperty('height', `${lines * lh}px`);
}).observe(elem);</code></pre>
      <p>It's also best to debounce the observer for better performance and to prevent the observer from fighting with
        the user for control over the element's height while the user is resizing it. Using this basic debounce function:</p>
      <pre><code class="language-javascript">function debounce(fn, wait) {
  let timeoutId;
  return () => {
    clearTimeout(timeoutId);
    timeoutId = setTimeout(fn, wait);
  }
}</code></pre>
      <p>You can update the observer to cancel if another event is fired within 200 milliseconds:</p>
      <pre><code class="language-javascript">new ResizeObserver(debounce(() => {
  const lines = Math.round(elem.clientHeight / lh);
  elem.style.setProperty('--lines', lines);
  elem.style.setProperty('height', `${lines * lh}px`);
}, 200)).observe(elem);</code></pre>
    </section>

    <section>
      <h2>Full example</h2>
      <p>Here's the final CSS:</p>
      <pre><code class="language-css">.dynamic-line-clamp {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: var(--lines);
  overflow: hidden;
  &::after {
    height: 1lh;
  }
}</code></pre>
      <p>And the final JavaScript:</p>
      <pre><code class="language-javascript">function debounce(fn, wait) {
  let timeoutId;
  return () => {
    clearTimeout(timeoutId);
    timeoutId = setTimeout(fn, wait);
  }
}

const elem = document.querySelector('.dynamic-line-clamp');
const lh = Number(getComputedStyle(elem, '::after').getPropertyValue('height').slice(0, -2));
new ResizeObserver(debounce(() => {
  const lines = Math.round(elem.clientHeight / lh);
  elem.style.setProperty('--lines', lines);
  elem.style.setProperty('height', `${lines * lh}px`);
}, 200)).observe(elem);</code></pre>
      <p>And here it is in action!</p>
      <div class="height-resizable-container">
        <p id="full-observer" class="dynamic-line-clamp both-resizable">
          Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore
          magna aliqua. Dolor sit amet consectetur adipiscing elit duis tristique sollicitudin. Suscipit adipiscing bibendum
          est ultricies integer quis auctor. Odio facilisis mauris sit amet massa vitae tortor condimentum lacinia. Nam
          libero justo laoreet sit amet cursus sit amet. Nisl vel pretium lectus quam id. Proin nibh nisl condimentum id.
          Sagittis vitae et leo duis ut diam quam nulla. Sed cras ornare arcu dui vivamus arcu felis. Vulputate ut pharetra
          sit amet aliquam id diam. Id neque aliquam vestibulum morbi. Tellus at urna condimentum mattis. Non enim praesent
          elementum facilisis leo vel. Turpis massa tincidunt dui ut. Risus quis varius quam quisque id. Amet purus gravida
          quis blandit. Felis eget velit aliquet sagittis id consectetur purus ut. Quis commodo odio aenean sed adipiscing.
          Pellentesque elit eget gravida cum sociis natoque penatibus et magnis. Facilisis leo vel fringilla est ullamcorper
          eget nulla. Montes nascetur ridiculus mus mauris. Nunc sed augue lacus viverra vitae congue. Morbi non arcu risus
          quis varius quam quisque id. Adipiscing tristique risus nec feugiat in fermentum posuere urna nec. Elit
          ullamcorper dignissim cras tincidunt lobortis feugiat vivamus.
        </p>
      </div>
    </section>
  </main>

  <script src="/prism.js"></script>
  <script type="module">
    function debounce(fn, wait) {
      let timeoutId;
      return () => {
        clearTimeout(timeoutId);
        timeoutId = setTimeout(fn, wait);
      }
    }

    const elem = document.querySelector('#basic-observer');
    const lh = Number(getComputedStyle(elem, '::after').getPropertyValue('height').slice(0, -2));
    new ResizeObserver(() => {
      const lines = Math.round(elem.clientHeight / lh);
      elem.style.setProperty('--lines', lines);
    }).observe(elem);

    const elem2 = document.querySelector('#full-observer');
    const lh2 = Number(getComputedStyle(elem2, '::after').getPropertyValue('height').slice(0, -2));
    new ResizeObserver(debounce(() => {
      const lines = Math.round(elem2.clientHeight / lh2);
      elem2.style.setProperty('--lines', lines);
      elem2.style.setProperty('height', `${lines * lh2}px`);
    }, 200)).observe(elem2);

    // Insert "Copy to clipboard" icon button to all code blocks
    const clipboardSVG = `<rect width="8" height="4" x="8" y="2" rx="1" ry="1"/>
        <path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2"/>
        <path d="M16 4h2a2 2 0 0 1 2 2v4"/><path d="M21 14H11"/>
        <path d="m15 10-4 4 4 4"/>`;
    const checkSVG = '<polyline points="20 6 9 17 4 12"/>';
    document.querySelectorAll('pre').forEach(pre => {
      pre.insertAdjacentHTML('beforeend', `<button aria-label="Copy"><svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">${clipboardSVG}</svg></button>`);
    });

    function copy(event) {
      const button = event.target;
      const code = button.closest('pre').querySelector('code').textContent;
      navigator.clipboard.writeText(code);
      button.setAttribute('aria-label', 'Copied!');
      const svg = button.querySelector('svg');
      svg.style.setProperty('stroke', 'green');
      svg.innerHTML = checkSVG;
      setTimeout(() => {
        svg.innerHTML = clipboardSVG;
        svg.style.setProperty('stroke', 'currentColor');
        button.setAttribute('aria-label', 'Copy');
      }, 2000);
    }

    document.querySelectorAll('button').forEach(button => button.addEventListener('click', copy));
  </script>
</body>

</html>